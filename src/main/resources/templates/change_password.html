<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html>
<head>
<meta charset="utf-8"/>
<title>修改密码-用户中心</title>
<meta name="keywords"  content="DeathGhost" />
<meta name="description" content="DeathGhost" />
<meta name="author" content="DeathGhost,deathghost@deathghost.cn">
<link rel="icon" th:href="@{/images/icon/favicon.ico}" type="image/x-icon">
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" /><script th:src="@{/js/html5.js}"></script>
<script th:src="@{/js/jquery.js}"></script>
<script>
$(document).ready(function(){
  $("nav .indexAsideNav").hide();
  $("nav .category").mouseover(function(){
	  $(".asideNav").slideDown();
	  });
  $("nav .asideNav").mouseleave(function(){
	  $(".asideNav").slideUp();
	  });
});
</script>
</head>
<body>
<!--header-->
<header>
  <!--topNavBg-->
  <div class="topNavBg">
   <div class="wrap">
   <!--topLeftNav-->
    <ul class="topLtNav">
     <li><a href="login.html" class="obviousText">亲，请登录</a></li>
     <li><a href="register.html">注册</a></li>
     <li><a href="#">移动端</a></li>
    </ul>
   <!--topRightNav-->
    <ul class="topRtNav">
        <li><a th:href="@{/user/user}">个人中心</a></li>
          <li><a th:href="@{/cart/myCart(userId=${session.LOGIN_USER.getId()})}" class="cartIcon">购物车<i>0</i></a></li>
    </ul>
   </div>
  </div>
  <!--logoArea-->
  <div class="wrap logoSearch">
   <!--logo-->
   <div class="logo">
    <h1><img th:src="@{/images/logo.png}"/></h1>
   </div>
   <!--search-->
   <div class="search">
    <ul class="switchNav">
     <li class="active" id="chanpin">产品</li>
     <li id="shangjia">商家</li>
     <li id="zixun">搭配</li>
     <li id="wenku">文库</li>
    </ul>
    <div class="searchBox">
     <form action="selectByKey">
      <div class="inputWrap">
      <input type="text" placeholder="输入产品关键词或货号"/>
      </div>
      <div class="btnWrap">
      <input type="submit" value="搜索"/>
      </div>
     </form>
    </div>
   </div>
  </div>
  <!--nav-->
  <nav>
<ul class="wrap navList">
<li class="category">
<a>全部产品分类</a>
<dl class="asideNav indexAsideNav">
<dt><a th:href="@{/item/selectByPetCategory(category=0)}">狗狗</a></dt>
     <dd>
     <a th:href="@{/item/listByCategory(category=1)}">主粮零食</a>
     <a th:href="@{/item/listByCategory(category=2)}">狗狗玩具</a>
     <a th:href="@{/item/listByCategory(category=3)}">出行装备</a>
     <a th:href="@{/item/listByCategory(category=4)}">医疗用品</a>
     <a th:href="@{/item/listByCategory(category=5)}">狗狗清洁</a>

     </dd>
     <dt><a th:href="@{/item/selectByPetCategory(category=1)}">猫猫</a></dt>
     <dd>
     <a th:href="@{/item/listByCategory(category=6)}">主粮零食</a>
     <a th:href="@{/item/listByCategory(category=7)}">狗狗玩具</a>
     <a th:href="@{/item/listByCategory(category=8)}">出行装备</a>
     <a th:href="@{/item/listByCategory(category=9)}">医疗用品</a>
     <a th:href="@{/item/listByCategory(category=10)}">猫猫清洁</a>
     </dd>
</dl>
</li>
<li>
<a th:href="@{/item/list}">首页</a>
</li>
<li>
<a href="#">促销专区</a>
</li>
<li>
<a href="#">秒杀专场</a>
</li>
<li>
<a href="#">其他</a>
</li>
</ul>
</nav>

 </header>
 <script>
 $(document).ready(function(){
   //测试效果，程序对接如需变动重新编辑
   $(".switchNav li").click(function(){
     $(this).addClass("active").siblings().removeClass("active");
     });
   $("#chanpin").click(function(){
     $(".inputWrap input[type='text']").attr("placeholder","输入产品关键词或货号");
     });
   $("#shangjia").click(function(){
     $(".inputWrap input[type='text']").attr("placeholder","输入商家店铺名");
     });
   $("#zixun").click(function(){
     $(".inputWrap input[type='text']").attr("placeholder","输入关键词查找文章内容");
     });
   $("#wenku").click(function(){
     $(".inputWrap input[type='text']").attr("placeholder","输入关键词查找文库内容");
     });
   });
   
 </script>
 
<section class="wrap user_center_wrap">
 <!--左侧导航-->
  <aside class="user_aside_nav">
   <dl>
    <dt>买家中心</dt>
    <dd><a th:href="@{/order/myOrder(userId=${session.LOGIN_USER.id})}">我的订单</a></dd>
    <dd><a th:href="@{/address/selectAddress}">我的地址库</a></dd>
   </dl>

   <dl>
    <dt>控制面板</dt>
    <dd><a href="profile.html">个人资料</a></dd>
    <dd><a th:href="@{/user/modifyPassword}">修改密码</a></dd>
   </dl>
  </aside>
 <!--右侧：内容区域-->
 <div class="user_rt_cont">
  <div class="top_title">
   <strong>修改密码</strong>
  </div>
  <table class="order_table">
   <tr>
    <td width="80" align="right">原始密码：</td>
    <td><input type="password" class="textbox" id="originPassword"/></td>
   </tr>
   <tr>
    <td width="80" align="right">设置新密码：</td>
    <td><input type="password" class="textbox" id="password"/></td>
   </tr>
   <tr>
    <td width="80" align="right">确认新密码：</td>
    <td><input type="password" class="textbox" id="confirmPassword"/></td>
   </tr>
   <tr>
    <td width="80" align="right"></td>
    <td><input type="button" class=" group_btn" id="modifyPassword" value="修改密码"/></td>
   </tr>
  </table>
 </div>
</section>
<!--footer-->
<footer>
 <!--help-->
 <ul class="wrap help">
  <li>
   <dl>
    <dt>消费者保障</dt>
    <dd><a href="article_read.html">保障范围</a></dd>
    <dd><a href="article_read.html">退换货流程</a></dd>
    <dd><a href="article_read.html">服务中心</a></dd>
    <dd><a href="article_read.html">更多服务特色</a></dd>
   </dl>
  </li>
  <li>
   <dl>
    <dt>新手上路</dt>
    <dd><a href="article_read.html">保障范围</a></dd>
    <dd><a href="article_read.html">退换货流程</a></dd>
    <dd><a href="article_read.html">服务中心</a></dd>
    <dd><a href="article_read.html">更多服务特色</a></dd>
   </dl>
  </li>
  <li>
   <dl>
    <dt>付款方式</dt>
    <dd><a href="article_read.html">保障范围</a></dd>
    <dd><a href="article_read.html">退换货流程</a></dd>
    <dd><a href="article_read.html">服务中心</a></dd>
    <dd><a href="article_read.html">更多服务特色</a></dd>
   </dl>
  </li>
  <li>
   <dl>
    <dt>服务保障</dt>
    <dd><a href="article_read.html">保障范围</a></dd>
    <dd><a href="article_read.html">退换货流程</a></dd>
    <dd><a href="article_read.html">服务中心</a></dd>
    <dd><a href="article_read.html">更多服务特色</a></dd>
   </dl>
  </li>
 </ul>
 <div class="wrap btmInfor" align="center">
   <address>© 2019 版权所有 网络文化经营许可证：浙网文[2013]***-027号 增值电信业务经营许可证：浙B2-200***24-1 信息网络传播视听节目许可证：1109***4号</address>
   </br>
   <address>联系地址：湖北省十堰市</address>
  </div>
</footer>
</body>
<script>
	jQuery(document).ready(function(){

    		//绑定opt的clic事件用于向后端发送获取手机验证码的请求
    		$("#modifyPassword").on("click",function(){
    		    var originPassword = $("#originPassword").val();
    			var password = $("#password").val();
    			var confirmPassword = $("#confirmPassword").val();


    			if(password != confirmPassword){
    				alert("密码不一致");
    				return false;
    			}
    			$.ajax({
    				type:"POST",
    				contentType:"application/x-www-form-urlencoded",
    				url:"http://localhost:8090/petstore/user/doModifyPassword",
    				data:{
    				    "originPassword":originPassword,
    				    "password":password,
    					"confirmPassword":confirmPassword,
    				},
    				xhrFields:{withCredentials:true},
    				success:function(data){
    					if(data.status == "success"){
    						alert("修改密码成功,重新登陆");
    						window.location.href="/petstore/hello";
    					}else{
    						alert("修改密码失败"+data.data.errMsg);
    					}
    				},
    			});
    			return false;
    		});
    	});
</script>
</html>
