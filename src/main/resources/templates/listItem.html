<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
	<title>米乐宠物商城</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<!-- 新 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
	<link rel="stylesheet" th:href="@{/css/main.css}">
	<!-- jQuery文件.务必在bootstrap.min.js 之前引入 -->
	<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <script type="text/javascript" th:src="@{/js/jquery-1.7.2.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/script.js}"></script>
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<style>
		.carousel-inner .item img {
			width: 100%;
			 }/* or width: 100% !important; */
		.myfoot{
                margin-left: 10%;
                 width: 80%;
                 height: 70px;
                 position: absolute;
                 bottom:0;
                 left: 0;
          }
          .navbar-text{
            margin-left: 3px;
            margin-right: 3px;
            margin-top: 12px;
          }
          .glyphicon glyphicon-arrow-down{
                color: #d2dbe1;
          }
           btn-default{

           }

	</style>
</head>
<body th:style="'background:url('+ '/petstore/assets/global/img/bg.jpg'+ ');'">
<div class="storeheader">
	<nav class="navbar navbar-default" >
	<div class="container-fluid" >
		<ul class="nav navbar-nav navbar-right">
			<li class="dropdown" >
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					<span th:text="${session.LOGIN_USER.getName()}"/> <b class="caret"></b>
				</a>
				<ul class="dropdown-menu">
					<li><a href="/petstore/user/modifyPassword">修改密码</a></li>
					<li><a href="/petstore/user/myAddress">管理我的地址</a></li>
				</ul>
			</li>
			<li><a th:href="@{/cart/myCart(userId=${session.LOGIN_USER.getId()})}"><span class="glyphicon glyphicon-shopping-cart"></span>我的购物车</a></li>
			<li><a th:href="@{/hello}"><span class="glyphicon glyphicon-log-out"></span>退出</a></li>
		</ul>
		<div class="navbar-header" style="margin-left: 10%;margin-right: 10%" >
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" th:href="@{/item/list}">米乐宠物商城</a>
			<img th:src="@{/assets/global/img/logo.jpg}"  width="70" height="50">
		</div>
		<div class="collapse navbar-collapse" id="myNavbar" >
			<ul class="nav navbar-nav">
				<li class="dropdown" >
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						狗狗 <b class="caret"></b>
					</a>
					<ul class="dropdown-menu">
						<li><a th:href="@{/item/listByCategory(category=1)}">狗粮</a></li>
						<li class="divider"></li>
						<li><a th:href="@{/item/listByCategory(category=2)}">狗狗玩具</a></li>
						<li class="divider"></li>
						<li><a th:href="@{/item/listByCategory(category=3)}">出行装备</a></li>
					</ul>
				</li>
				<li class="dropdown" >
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						猫咪 <b class="caret"></b>
					</a>
					<ul class="dropdown-menu">
						<li><a th:href="@{/item/listByCategory(category=4)}">猫粮</a></li>
						<li class="divider"></li>
						<li><a th:href="@{/item/listByCategory(category=5)}">猫猫玩具</a></li>
						<li class="divider"></li>
						<li><a th:href="@{/item/listByCategory(category=6)}">出行装备</a></li>
					</ul>
				</li>
				<form class="navbar-form navbar-right" action="selectByKey"  role="search">
				<div class="form-group">
				<input type="text" class="form-control" placeholder="Search" name="key">
				</div>
				<button type="submit" id="search" class="btn btn-default">搜索</button>
				</form>
			</ul>
		</div>
	</div>
</nav>
</div>
<div class="storecontent">
<nav class="navbar navbar-default" role="navigation" style="background-color: #ffffff">
    <div class="container-fluid">
        <ul class="select" style="width: 100%;top: 0">
        		<li class="select-list">
        			<dl id="select1">
        				<dt>宠物分类：</dt>
        				<dd class="select-all selected"><a href="#">全部</a></dd>
        				<dd><a href="#">猫猫</a></dd>
        				<dd><a href="#">狗狗</a></dd>
        			</dl>
        		</li>
        		<li class="select-list">
        			<dl id="select2">
        				<dt>用品：</dt>
        				<dd class="select-all selected"><a href="#">全部</a></dd>
        				<dd><a href="#">主粮零食</a></dd>
        				<dd><a href="#">宠物玩具</a></dd>
        				<dd><a href="#">出行装备</a></dd>
        			</dl>
        		</li>
        		<li class="select-list">
        			<dl id="select3">
        				<dt>价格区间：</dt>
        				<dd class="select-all selected"><a href="#">全部</a></dd>
        				<dd><a href="#">0-30</a></dd>
        				<dd><a href="#">30-50</a></dd>
        				<dd><a href="#">50-200</a></dd>
        				<dd><a href="#">200-500</a></dd>
        			</dl>
        		</li>
        		<li class="select-result">
        			<dl>
        				<dt>已选条件：</dt>
        				<dd class="select-no">暂时没有选择过滤条件</dd>
        			</dl>
        			 <button class="btn  btn-default btn-sm"  type="button" id = "searchByFactor">
                                                    确认搜索
                                                </button>
        		</li>

        	</ul>
        <!--向左对齐-->

        <!--向右对齐-->

    </div>
</nav>



	<div class="contentfooter">
	<div class="panel panel-default" style="width: 100%">
		<div class="panel-body">
		<table class="table table-hover">
			<tr>
				<th>商品名称</th>
				<th>商品图片</th>
				<th>商品描述</th>
				<th>商品价格</th>
				<th>商品销量</th>
			</tr>
			<tr  th:each="itemDO:${session.pageInfo.list}">
				<td th:text="${itemDO.title}"></td>
				<td ><img th:src="@{${itemDO.imgUrl}}" width="100" height="100" /></td>
				<td th:text="${itemDO.description}"></td>
				<td th:text="${itemDO.price}"></td>
				<td th:text="${itemDO.sales}"></td>
				<td><a th:href="@{get(id=${itemDO.getId()})}">商品详情</a></td>
			</tr>
		</table>
		<nav aria-label="Page navigation" th:align="center">
          <ul class="pagination">

			<li><span width="10%" th:if="${session.pageInfo.hasPreviousPage}">
				<a th:href="'?pageNo=1'">首页</a>
				</span>
			</li>
             <li>
			<span width="10%" th:if="${session.pageInfo.hasPreviousPage}">
				<a th:href="'?pageNo='+${session.pageInfo.prePage}">上一页</a>
			</span>
			</li>
			<li>
			<span width="10%" th:each="nav : ${session.pageInfo.navigatepageNums}">
				<a th:href="'?pageNo='+${nav}" th:text="${nav}" th:if="${nav != session.pageInfo.pageNum}"></a>
				<span style="font-weight: bold" th:if="${nav == session.pageInfo.pageNum}" th:text="${nav}"></span>
			</span>
			</li>
			<li>
			<span width="10%" th:if="${session.pageInfo.hasNextPage}">
				<a th:href="'?pageNo='+${session.pageInfo.nextPage}">下一页</a>
			</span>
			</li>
			<li>
			<span width="10%" th:if="${session.pageInfo.hasNextPage}">
				<a th:href="'?pageNo='+${session.pageInfo.pages}">尾页</a>
			</span>
			</li>
		</ul>
		</nav>
	</div>
</div>
	</div>
</div>

</body>
<script>
   jQuery(document).ready(function(){

       		//绑定opt的clic事件用于向后端发送获取手机验证码的请求
       		$("#searchByFactor").on("click",function(){
                var pet = $("#selectA.selected").text();
                var use = $("#selectB.selected").text();
                var price = $("#selectC.selected").text();
                $.ajax({
                    type:"POST",
                	contentType:"application/x-www-form-urlencoded",
                	url:"http://localhost:8090/petstore/item/selectByFactor",
                	data:{
                		"pet":pet,
                		"use":use,
                		"price":price,
                	},
                		xhrFields:{withCredentials:true},
                         success:function(data){
                        if(data.status == "success"){
                            window.location.href="/petstore/item/mylist"
                         }
                  },
                });
       		});
       	});

</script>
</html>
